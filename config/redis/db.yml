version: "2.4"
services:
  redis:
    image: "redis:7.0.0"
    command:
      - "redis-server"
      - "--save"
      - ""
      - "--repl-diskless-sync"
      - "yes"
      - "--repl-diskless-load"
      - "swapdb"
      - "--hash-max-ziplist-value"
      - "128"
      - "--client-output-buffer-limit"
      - "normal"
      - "0"
      - "0"
      - "0"
      - "slave"
      - "536870912"
      - "536870912"
      - "0"
      - "pubsub"
      - "33554432"
      - "8388608"
      - "60"
      - "--loglevel"
      - "warning"
    volumes:
      - "/home/universalis/db/data:/data:ro"
    network_mode: "host"
  exporter:
    image: "oliver006/redis_exporter:v1.45.0"
    network_mode: "host"
    environment:
      REDIS_ADDR: "redis://localhost:6379"
      REDIS_EXPORTER_WEB_LISTEN_ADDRESS: "0.0.0.0:9121"
